## PostgreSQL Oracle 兼容性之 - binary_float binary_double      
                                                                                                                                                        
### 作者                                                                                                                                                        
digoal                                                                                                                                                        
                                                                                                                                                        
### 日期                                                                                                                                                        
2019-07-22                                                                                                                                                         
                                                                                                                                                        
### 标签                                                                                                                                                        
PostgreSQL , Oracle , 浮点 , inf , nan      
                                                                       
----                                                                                                                                                  
                                                                                                                                                    
## 背景         
Oracle binary float, binary double 类型：  
  
https://docs.oracle.com/cd/E11882_01/timesten.112/e21642/types.htm  
  
https://www.oracletutorial.com/oracle-basics/oracle-floating-point-data-types/  
  
Oracle 10g introduces two new floating point data types BINARY_FLOAT and BINARY_DOUBLE that allow you to store floating-point numbers in your table columns.  
  
The floating-point numbers do not have the same precision as the NUMBER values, but they have a better performance for numerical computations.   
Because of this, the floating-point numbers are suitable for the scientific calculations but not suitable for financial calculations.  
  
float，double固定长度，计算效率更高，精度比number低，适合科学计算，不适合资金相关计算。  
  
### BINARY_DOUBLE A 64-bit floating-point number  
  
BINARY_DOUBLE is a double-precision native floating point number that supports +Inf, -Inf, and NaN values.   
BINARY_DOUBLE is an approximate numeric value consisting of an exponent and mantissa.   
You can use exponential or E-notation.   
BINARY_DOUBLE has binary precision 53.  
  
Minimum positive finite value: 2.22507485850720E-308  
  
Maximum positive finite value: 1.79769313486231E+308  
  
For more details, see "BINARY_DOUBLE".  
  
### BINARY_FLOAT A 32-bit floating-point number  
  
BINARY_FLOAT is a single-precision native floating-point type that supports +Inf, -Inf, and NaN values.   
BINARY_FLOAT is an approximate numeric value consisting of an exponent and mantissa.   
You can use exponential or E-notation.   
BINARY_FLOAT has binary precision 24.  
  
Minimum positive finite value: 1.17549E-38F  
  
Maximum positive finite value: 3.40282E+38F  
  
For more details, see "BINARY_FLOAT".  
  
## PG 浮点类型  
https://www.postgresql.org/docs/12/datatype-numeric.html#DATATYPE-FLOAT  
  
The data types real and double precision are inexact, variable-precision numeric types.   
On all currently supported platforms, these types are implementations of IEEE Standard 754 for Binary Floating-Point Arithmetic (single and double precision, respectively), to the extent that the underlying processor, operating system, and compiler support it.  
  
PG支持的就是ieee 754标准的binary float。  
  
This value will use at most 17 significant decimal digits for float8 values, and at most 9 digits for float4 values.  
  
同样支持无限大，无限小，非数值  
  
In addition to ordinary numeric values, the floating-point types have several special values:  
  
```  
Infinity  
-Infinity  
NaN  
```  
  
These represent the IEEE 754 special values “infinity”, “negative infinity”, and “not-a-number”, respectively. When writing these values as constants in an SQL command, you must put quotes around them, for example UPDATE table SET x = '-Infinity'. On input, these strings are recognized in a case-insensitive manner.  
  
## 例子  
  
```  
postgres=# select float4 '1.17549E-38';  
   float4      
-------------  
 1.17549e-38  
(1 row)  
  
postgres=# select float8 '2.22507485850721E-308';  
        float8           
-----------------------  
 2.22507485850721e-308  
(1 row)  
  
postgres=# select float4 '3.40282E+38';  
   float4      
-------------  
 3.40282e+38  
(1 row)  
  
postgres=# select float8 '1.79769313486231E+308';  
        float8           
-----------------------  
 1.79769313486231e+308  
(1 row)  
  
postgres=# select 'inf'::float;  
  float8    
----------  
 Infinity  
(1 row)  
  
postgres=# select 'nan'::float;  
 float8   
--------  
    NaN  
(1 row)  
  
postgres=# select '-inf'::float;  
  float8     
-----------  
 -Infinity  
(1 row)  
```  
  
## 参考  
https://www.postgresql.org/docs/12/datatype-numeric.html#DATATYPE-FLOAT  
  
https://docs.oracle.com/cd/E11882_01/timesten.112/e21642/types.htm  
  
https://www.oracletutorial.com/oracle-basics/oracle-floating-point-data-types/  
    
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
#### [9.9元购买3个月阿里云RDS PostgreSQL实例](https://www.aliyun.com/database/postgresqlactivity "57258f76c37864c6e6d23383d05714ea")
  
  
#### [PostgreSQL 解决方案集合](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [1 任意维度实时圈人](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [2 时序数据实时处理](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [3 时间、空间、业务 多维数据实时透视](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [4 独立事件相关性分析](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [5 海量关系实时图式搜索](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [6 社交业务案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [7 流式数据实时处理案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [8 IoT 物联网, 时序](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [9 全文检索](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [10 模糊、正则 查询案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [11 图像识别](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [12 向量相似检索](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [13 数据清洗、采样、脱敏、批处理、合并](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [14 GIS 地理信息空间数据应用](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [15 金融业务](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [16 异步消息应用案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [17 海量数据 冷热分离](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [18 倒排索引案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [19 海量数据OLAP处理应用](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
  
  
#### [德哥 / digoal's 趣味入口 - 努力成为灯塔, 公益是一辈子的事.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
![德哥的微信 / digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
  
#### [PostgreSQL 解决方案集合](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [1 任意维度实时圈人](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [2 时序数据实时处理](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [3 时间、空间、业务 多维数据实时透视](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [4 独立事件相关性分析](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [5 海量关系实时图式搜索](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [6 社交业务案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [7 流式数据实时处理案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [8 IoT 物联网, 时序](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [9 全文检索](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [10 模糊、正则 查询案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [11 图像识别](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [12 向量相似检索](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [13 数据清洗、采样、脱敏、批处理、合并](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [14 GIS 地理信息空间数据应用](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [15 金融业务](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [16 异步消息应用案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [17 海量数据 冷热分离](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [18 倒排索引案例](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
- [19 海量数据OLAP处理应用](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
  
